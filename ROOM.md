# üè† –ü–µ—Ä–µ–≥–æ–≤–æ—Ä–Ω–∞—è –∫–æ–º–Ω–∞—Ç–∞ - –ü–ª–∞–Ω —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏

## üìù –ö–æ–Ω—Ü–µ–ø—Ü–∏—è

–ú–Ω–æ–≥–æ–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∞—è –ø–µ—Ä–µ–≥–æ–≤–æ—Ä–Ω–∞—è –∫–æ–º–Ω–∞—Ç–∞ –¥–ª—è —Ä–µ–∞–ª-—Ç–∞–π–º –ø–µ—Ä–µ–≤–æ–¥–∞ –º–µ–∂–¥—É —É—á–∞—Å—Ç–Ω–∏–∫–∞–º–∏ –Ω–∞ —Ä–∞–∑–Ω—ã—Ö —è–∑—ã–∫–∞—Ö.

### –ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç:
- –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –ê —Å–æ–∑–¥–∞—ë—Ç –∫–æ–º–Ω–∞—Ç—É ‚Üí –ø–æ–ª—É—á–∞–µ—Ç –∫–æ–¥ (ABC123)
- –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –ë –ø—Ä–∏—Å–æ–µ–¥–∏–Ω—è–µ—Ç—Å—è –ø–æ –∫–æ–¥—É
- –ö–∞–∂–¥—ã–π –ø–∏—à–µ—Ç –Ω–∞ —Å–≤–æ—ë–º —è–∑—ã–∫–µ
- –ü–µ—Ä–µ–≤–æ–¥—ã –ø—Ä–∏—Ö–æ–¥—è—Ç –æ—Å—Ç–∞–ª—å–Ω—ã–º —É—á–∞—Å—Ç–Ω–∏–∫–∞–º
- –û—Ä–∏–≥–∏–Ω–∞–ª—å–Ω—ã–π —Ç–µ–∫—Å—Ç —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è —É –æ—Ç–ø—Ä–∞–≤–∏—Ç–µ–ª—è

---

## üóÑÔ∏è –≠—Ç–∞–ø 1: –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö (2-3 —á–∞—Å–∞)

### –ù–æ–≤—ã–µ —Ç–∞–±–ª–∏—Ü—ã:

```sql
-- –ö–æ–º–Ω–∞—Ç—ã –¥–ª—è –ø–µ—Ä–µ–≥–æ–≤–æ—Ä–æ–≤
CREATE TABLE rooms (
    id INTEGER PRIMARY KEY AUTOINCREMENT,
    code TEXT UNIQUE NOT NULL,           -- –£–Ω–∏–∫–∞–ª—å–Ω—ã–π –∫–æ–¥: ABC123
    creator_id INTEGER NOT NULL,          -- ID —Å–æ–∑–¥–∞—Ç–µ–ª—è
    name TEXT,                            -- –ù–∞–∑–≤–∞–Ω–∏–µ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
    status TEXT DEFAULT 'active',         -- active/closed
    max_members INTEGER DEFAULT 10,       -- –õ–∏–º–∏—Ç —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    expires_at TIMESTAMP,                 -- –ê–≤—Ç–æ–∑–∞–∫—Ä—ã—Ç–∏–µ
    FOREIGN KEY (creator_id) REFERENCES users(id)
);

-- –£—á–∞—Å—Ç–Ω–∏–∫–∏ –∫–æ–º–Ω–∞—Ç
CREATE TABLE room_members (
    room_id INTEGER,
    user_id INTEGER,
    language_code TEXT NOT NULL,          -- –†–æ–¥–Ω–æ–π —è–∑—ã–∫ —É—á–∞—Å—Ç–Ω–∏–∫–∞
    role TEXT DEFAULT 'member',           -- creator/member
    joined_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    last_seen TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    PRIMARY KEY (room_id, user_id),
    FOREIGN KEY (room_id) REFERENCES rooms(id) ON DELETE CASCADE,
    FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE
);

-- –ò—Å—Ç–æ—Ä–∏—è —Å–æ–æ–±—â–µ–Ω–∏–π (–¥–ª—è –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞ –∏ –ª–æ–≥–æ–≤)
CREATE TABLE room_messages (
    id INTEGER PRIMARY KEY AUTOINCREMENT,
    room_id INTEGER NOT NULL,
    user_id INTEGER NOT NULL,
    message_text TEXT NOT NULL,           -- –û—Ä–∏–≥–∏–Ω–∞–ª—å–Ω—ã–π —Ç–µ–∫—Å—Ç
    language_code TEXT NOT NULL,          -- –Ø–∑—ã–∫ –æ—Ä–∏–≥–∏–Ω–∞–ª–∞
    message_type TEXT DEFAULT 'text',     -- text/voice/system
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    FOREIGN KEY (room_id) REFERENCES rooms(id) ON DELETE CASCADE,
    FOREIGN KEY (user_id) REFERENCES users(id)
);

-- –ò–Ω–¥–µ–∫—Å—ã –¥–ª—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏
CREATE INDEX IF NOT EXISTS idx_rooms_code ON rooms(code);
CREATE INDEX IF NOT EXISTS idx_rooms_status ON rooms(status);
CREATE INDEX IF NOT EXISTS idx_room_members_user ON room_members(user_id);
CREATE INDEX IF NOT EXISTS idx_room_messages_room ON room_messages(room_id);
```

### –ú–µ—Ç–æ–¥—ã DatabaseManager:

**–ö–æ–º–Ω–∞—Ç—ã:**
- `create_room(creator_id, language_code) -> room_code`
- `get_room_by_code(code) -> room_data`
- `close_room(room_id)`
- `delete_expired_rooms(hours=24) -> count`

**–£—á–∞—Å—Ç–Ω–∏–∫–∏:**
- `join_room(room_id, user_id, language_code)`
- `leave_room(room_id, user_id)`
- `get_room_members(room_id) -> List[Dict]`
- `get_user_active_room(user_id) -> room_data | None`

**–°–æ–æ–±—â–µ–Ω–∏—è:**
- `save_room_message(room_id, user_id, text, lang)`
- `get_room_history(room_id, limit=50) -> List[Dict]`

---

## üîß –≠—Ç–∞–ø 2: –ú–æ–¥–µ–ª–∏ –∏ —Å–µ—Ä–≤–∏—Å—ã (3-4 —á–∞—Å–∞)

### src/models/room.py
```python
from dataclasses import dataclass
from datetime import datetime
from typing import List, Optional

@dataclass
class Room:
    id: int
    code: str
    creator_id: int
    name: Optional[str]
    status: str
    max_members: int
    created_at: datetime
    expires_at: Optional[datetime]

@dataclass
class RoomMember:
    room_id: int
    user_id: int
    language_code: str
    role: str
    joined_at: datetime
    user_profile: dict  # username, first_name
```

### src/services/room_manager.py
```python
class RoomManager:
    """–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–µ—Ä–µ–≥–æ–≤–æ—Ä–Ω—ã–º–∏ –∫–æ–º–Ω–∞—Ç–∞–º–∏"""

    async def create_room(user_id, language_code, name=None):
        """–°–æ–∑–¥–∞—Ç—å –Ω–æ–≤—É—é –∫–æ–º–Ω–∞—Ç—É"""

    async def join_room(code, user_id, language_code):
        """–ü—Ä–∏—Å–æ–µ–¥–∏–Ω–∏—Ç—å—Å—è –∫ –∫–æ–º–Ω–∞—Ç–µ"""

    async def leave_room(user_id):
        """–ü–æ–∫–∏–Ω—É—Ç—å –∞–∫—Ç–∏–≤–Ω—É—é –∫–æ–º–Ω–∞—Ç—É"""

    async def get_active_room(user_id):
        """–ü–æ–ª—É—á–∏—Ç—å –∞–∫—Ç–∏–≤–Ω—É—é –∫–æ–º–Ω–∞—Ç—É –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è"""

    async def broadcast_message(room_id, sender_id, text, source_lang):
        """–û—Ç–ø—Ä–∞–≤–∏—Ç—å –ø–µ—Ä–µ–≤–µ–¥—ë–Ω–Ω–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ –≤—Å–µ–º —É—á–∞—Å—Ç–Ω–∏–∫–∞–º"""

    async def close_room(room_id, user_id):
        """–ó–∞–∫—Ä—ã—Ç—å –∫–æ–º–Ω–∞—Ç—É (—Ç–æ–ª—å–∫–æ —Å–æ–∑–¥–∞—Ç–µ–ª—å)"""
```

### –ì–µ–Ω–µ—Ä–∞—Ç–æ—Ä –∫–æ–¥–æ–≤:
```python
def generate_room_code() -> str:
    """–ì–µ–Ω–µ—Ä–∞—Ü–∏—è —É–Ω–∏–∫–∞–ª—å–Ω–æ–≥–æ 6-—Å–∏–º–≤–æ–ª—å–Ω–æ–≥–æ –∫–æ–¥–∞"""
    import random, string
    return ''.join(random.choices(string.ascii_uppercase + string.digits, k=6))
```

---

## üéÆ –≠—Ç–∞–ø 3: –ö–æ–º–∞–Ω–¥—ã –∏ —Ö–µ–Ω–¥–ª–µ—Ä—ã (4-5 —á–∞—Å–æ–≤)

### src/handlers/room_commands.py

**–ö–æ–º–∞–Ω–¥—ã:**
- `/room` - –ì–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é –∫–æ–º–Ω–∞—Ç
- `/room create` - –°–æ–∑–¥–∞—Ç—å –∫–æ–º–Ω–∞—Ç—É
- `/room join ABC123` - –ü—Ä–∏—Å–æ–µ–¥–∏–Ω–∏—Ç—å—Å—è
- `/room leave` - –ü–æ–∫–∏–Ω—É—Ç—å –∫–æ–º–Ω–∞—Ç—É
- `/room info` - –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ —Ç–µ–∫—É—â–µ–π –∫–æ–º–Ω–∞—Ç–µ
- `/room close` - –ó–∞–∫—Ä—ã—Ç—å –∫–æ–º–Ω–∞—Ç—É (—Å–æ–∑–¥–∞—Ç–µ–ª—å)
- `/room history` - –ò—Å—Ç–æ—Ä–∏—è —Å–æ–æ–±—â–µ–Ω–∏–π

**Callback handlers:**
- `room_create` - –°–æ–∑–¥–∞–Ω–∏–µ –∫–æ–º–Ω–∞—Ç—ã
- `room_leave` - –í—ã—Ö–æ–¥ –∏–∑ –∫–æ–º–Ω–∞—Ç—ã
- `room_close` - –ó–∞–∫—Ä—ã—Ç–∏–µ –∫–æ–º–Ω–∞—Ç—ã
- `room_members` - –ü–æ–∫–∞–∑–∞—Ç—å —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤

### src/handlers/room_messages.py

**–û–±—Ä–∞–±–æ—Ç–∫–∞ —Å–æ–æ–±—â–µ–Ω–∏–π –≤ –∫–æ–º–Ω–∞—Ç–µ:**
```python
async def handle_room_message(message: Message):
    """
    1. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å, –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤ –∫–æ–º–Ω–∞—Ç–µ
    2. –û–ø—Ä–µ–¥–µ–ª–∏—Ç—å —è–∑—ã–∫ –æ—Ç–ø—Ä–∞–≤–∏—Ç–µ–ª—è
    3. –ü–æ–ª—É—á–∏—Ç—å —Å–ø–∏—Å–æ–∫ –¥—Ä—É–≥–∏—Ö —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤
    4. –ü–µ—Ä–µ–≤–µ—Å—Ç–∏ –Ω–∞ —è–∑—ã–∫ –∫–∞–∂–¥–æ–≥–æ —É—á–∞—Å—Ç–Ω–∏–∫–∞
    5. –û—Ç–ø—Ä–∞–≤–∏—Ç—å –ø–µ—Ä–µ–≤–æ–¥—ã
    6. –°–æ—Ö—Ä–∞–Ω–∏—Ç—å –≤ –∏—Å—Ç–æ—Ä–∏—é
    """
```

---

## üé® –≠—Ç–∞–ø 4: UI/UX (2-3 —á–∞—Å–∞)

### –ö–ª–∞–≤–∏–∞—Ç—É—Ä—ã:

**–ì–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é –∫–æ–º–Ω–∞—Ç:**
```
üè† –ü–µ—Ä–µ–≥–æ–≤–æ—Ä–Ω—ã–µ –∫–æ–º–Ω–∞—Ç—ã

[‚ûï –°–æ–∑–¥–∞—Ç—å –∫–æ–º–Ω–∞—Ç—É]
[üîë –ü—Ä–∏—Å–æ–µ–¥–∏–Ω–∏—Ç—å—Å—è –ø–æ –∫–æ–¥—É]
[üìã –ú–æ–∏ –∫–æ–º–Ω–∞—Ç—ã]
[üîô –ù–∞–∑–∞–¥]
```

**–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫–æ–º–Ω–∞—Ç–æ–π:**
```
üè† –ö–æ–º–Ω–∞—Ç–∞: ABC123
üë• –£—á–∞—Å—Ç–Ω–∏–∫–∏: 2/10

[üë• –°–ø–∏—Å–æ–∫ —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤]
[üìú –ò—Å—Ç–æ—Ä–∏—è]
[üö™ –ü–æ–∫–∏–Ω—É—Ç—å]
[üîí –ó–∞–∫—Ä—ã—Ç—å] (—Ç–æ–ª—å–∫–æ —Å–æ–∑–¥–∞—Ç–µ–ª—å)
```

**–§–æ—Ä–º–∞—Ç —Å–æ–æ–±—â–µ–Ω–∏–π:**
```
üí¨ –ò–≤–∞–Ω üá∑üá∫:
–ü—Ä–∏–≤–µ—Ç! –ö–∞–∫ –¥–µ–ª–∞?

‚Üí üá∫üá∏ Hello! How are you?
‚Üí üáπüá≠ ‡∏™‡∏ß‡∏±‡∏™‡∏î‡∏µ! ‡∏Ñ‡∏∏‡∏ì‡πÄ‡∏õ‡πá‡∏ô‡∏≠‡∏¢‡πà‡∏≤‡∏á‡πÑ‡∏£‡∏ö‡πâ‡∏≤‡∏á?

[12:34]
```

### src/utils/room_keyboards.py
```python
def build_rooms_menu()
def build_room_management_keyboard(room, user_id)
def build_member_list_keyboard(members)
```

---

## üß™ –≠—Ç–∞–ø 5: –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ (2-3 —á–∞—Å–∞)

### Unit —Ç–µ—Å—Ç—ã:
- `tests/test_room_manager.py` - –õ–æ–≥–∏–∫–∞ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –∫–æ–º–Ω–∞—Ç–∞–º–∏
- `tests/test_room_database.py` - –ë–î –æ–ø–µ—Ä–∞—Ü–∏–∏

### –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ —Ç–µ—Å—Ç—ã:
- –°–æ–∑–¥–∞–Ω–∏–µ –∫–æ–º–Ω–∞—Ç—ã
- –ü—Ä–∏—Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤
- –û—Ç–ø—Ä–∞–≤–∫–∞ —Å–æ–æ–±—â–µ–Ω–∏–π
- –ü–µ—Ä–µ–≤–æ–¥ –º–µ–∂–¥—É —É—á–∞—Å—Ç–Ω–∏–∫–∞–º–∏
- –í—ã—Ö–æ–¥/–∑–∞–∫—Ä—ã—Ç–∏–µ –∫–æ–º–Ω–∞—Ç—ã

### –¢–µ—Å—Ç–æ–≤—ã–µ —Å—Ü–µ–Ω–∞—Ä–∏–∏:
1. **2 –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è (RU ‚Üî EN)**
2. **3 –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è (RU ‚Üî EN ‚Üî TH)**
3. **–°–æ–∑–¥–∞–Ω–∏–µ/–∑–∞–∫—Ä—ã—Ç–∏–µ/–ø–µ—Ä–µ–æ—Ç–∫—Ä—ã—Ç–∏–µ**
4. **Edge cases: –ø–æ–ª–Ω–∞—è –∫–æ–º–Ω–∞—Ç–∞, –Ω–µ–≤–µ—Ä–Ω—ã–π –∫–æ–¥, –∏ —Ç.–¥.**

---

## üîÑ –≠—Ç–∞–ø 6: –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è (2-3 —á–∞—Å–∞)

### –ú–æ–¥–∏—Ñ–∏–∫–∞—Ü–∏–∏ —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–≥–æ –∫–æ–¥–∞:

**src/handlers/messages.py:**
```python
async def text_handler(message: Message):
    # –ü—Ä–æ–≤–µ—Ä–∏—Ç—å, –≤ –∫–æ–º–Ω–∞—Ç–µ –ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å
    if active_room := await room_manager.get_active_room(user_id):
        # –û–±—Ä–∞–±–æ—Ç–∞—Ç—å –∫–∞–∫ —Å–æ–æ–±—â–µ–Ω–∏–µ –≤ –∫–æ–º–Ω–∞—Ç–µ
        await handle_room_message(message)
    else:
        # –û–±—ã—á–Ω—ã–π –ø–µ—Ä–µ–≤–æ–¥
        await process_translation(message, message.text)
```

**src/main.py:**
```python
# –î–æ–±–∞–≤–∏—Ç—å –∞–≤—Ç–æ–æ—á–∏—Å—Ç–∫—É –∫–æ–º–Ω–∞—Ç
await db.delete_expired_rooms(hours=24)
logger.info("Expired rooms cleaned up")
```

---

## ‚ö†Ô∏è –í–∞–∂–Ω—ã–µ –º–æ–º–µ–Ω—Ç—ã –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏

### Rate Limiting:
- **–°–æ–∑–¥–∞–Ω–∏–µ –∫–æ–º–Ω–∞—Ç:** 3 –∫–æ–º–Ω–∞—Ç—ã –≤ —á–∞—Å –Ω–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- **–°–æ–æ–±—â–µ–Ω–∏—è:** 1 —Å–æ–æ–±—â–µ–Ω–∏–µ/2 —Å–µ–∫—É–Ω–¥—ã –≤ –∫–æ–º–Ω–∞—Ç–µ
- **–ü—Ä–∏—Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ:** 5 –ø–æ–ø—ã—Ç–æ–∫/–º–∏–Ω—É—Ç—É

### –í–∞–ª–∏–¥–∞—Ü–∏—è:
- ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–æ–¥–∞ –∫–æ–º–Ω–∞—Ç—ã (6 —Å–∏–º–≤–æ–ª–æ–≤, A-Z, 0-9)
- ‚úÖ –õ–∏–º–∏—Ç —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤ (max 10)
- ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä–∞–≤ (—Ç–æ–ª—å–∫–æ —Å–æ–∑–¥–∞—Ç–µ–ª—å –º–æ–∂–µ—Ç –∑–∞–∫—Ä—ã—Ç—å)
- ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ —è–∑—ã–∫–∞ (—Ç–æ–ª—å–∫–æ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã–µ)

### –û—á–∏—Å—Ç–∫–∞:
- ‚úÖ –ê–≤—Ç–æ–∑–∞–∫—Ä—ã—Ç–∏–µ —á–µ—Ä–µ–∑ 24 —á–∞—Å–∞ –Ω–µ–∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏
- ‚úÖ –£–¥–∞–ª–µ–Ω–∏–µ –∏—Å—Ç–æ—Ä–∏–∏ —á–µ—Ä–µ–∑ 7 –¥–Ω–µ–π
- ‚úÖ Cascade delete –ø—Ä–∏ —É–¥–∞–ª–µ–Ω–∏–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è

---

## üìä –ú–µ—Ç—Ä–∏–∫–∏ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏

### –û–∂–∏–¥–∞–µ–º—ã–µ –ø–æ–∫–∞–∑–∞—Ç–µ–ª–∏:
- **–°–æ–∑–¥–∞–Ω–∏–µ –∫–æ–º–Ω–∞—Ç—ã:** <100ms
- **–ü—Ä–∏—Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ:** <200ms
- **–û—Ç–ø—Ä–∞–≤–∫–∞ —Å–æ–æ–±—â–µ–Ω–∏—è:**
  - 2 —É—á–∞—Å—Ç–Ω–∏–∫–∞: ~3-4s (–ø–µ—Ä–µ–≤–æ–¥ –Ω–∞ 1 —è–∑—ã–∫)
  - 3 —É—á–∞—Å—Ç–Ω–∏–∫–∞: ~4-5s (–ø–µ—Ä–µ–≤–æ–¥ –Ω–∞ 2 —è–∑—ã–∫–∞)
  - 5 —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤: ~5-6s (–ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω—ã–π –ø–µ—Ä–µ–≤–æ–¥)

### –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏:
- ‚úÖ –ö—ç—à —Å–ø–∏—Å–∫–∞ —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤ (TTL 5 –º–∏–Ω—É—Ç)
- ‚úÖ Batch –ø–µ—Ä–µ–≤–æ–¥—ã –¥–ª—è –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö —è–∑—ã–∫–æ–≤
- ‚úÖ –ò–Ω–¥–µ–∫—Å—ã –ë–î –¥–ª—è –±—ã—Å—Ç—Ä—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤
- ‚úÖ Connection pooling –¥–ª—è –ë–î

---

## üöÄ MVP —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª (–ø–µ—Ä–≤–∞—è –≤–µ—Ä—Å–∏—è)

### –û–±—è–∑–∞—Ç–µ–ª—å–Ω–æ:
- [x] –°–æ–∑–¥–∞–Ω–∏–µ –∫–æ–º–Ω–∞—Ç—ã —Å —É–Ω–∏–∫–∞–ª—å–Ω—ã–º –∫–æ–¥–æ–º
- [x] –ü—Ä–∏—Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ –ø–æ –∫–æ–¥—É
- [x] –ê–≤—Ç–æ–æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —è–∑—ã–∫–∞ —É—á–∞—Å—Ç–Ω–∏–∫–∞
- [x] –ü–µ—Ä–µ–≤–æ–¥ —Ç–µ–∫—Å—Ç–æ–≤—ã—Ö —Å–æ–æ–±—â–µ–Ω–∏–π
- [x] –í—ã—Ö–æ–¥ –∏–∑ –∫–æ–º–Ω–∞—Ç—ã
- [x] –°–ø–∏—Å–æ–∫ —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤
- [x] –ó–∞–∫—Ä—ã—Ç–∏–µ –∫–æ–º–Ω–∞—Ç—ã —Å–æ–∑–¥–∞—Ç–µ–ª–µ–º

### –û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ (v2):
- [ ] –ì–æ–ª–æ—Å–æ–≤—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è –≤ –∫–æ–º–Ω–∞—Ç–∞—Ö
- [ ] –ò–º–µ–Ω–æ–≤–∞–Ω–Ω—ã–µ –∫–æ–º–Ω–∞—Ç—ã
- [ ] –ò—Å—Ç–æ—Ä–∏—è —Å–æ–æ–±—â–µ–Ω–∏–π —Å –ø–æ–∏—Å–∫–æ–º
- [ ] –ü—Ä–∏–≥–ª–∞—à–µ–Ω–∏—è –ø–æ username
- [ ] –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –æ –≤—Ö–æ–¥–µ/–≤—ã—Ö–æ–¥–µ
- [ ] –†–æ–ª–∏: –º–æ–¥–µ—Ä–∞—Ç–æ—Ä—ã
- [ ] –ü—Ä–∏–≤–∞—Ç–Ω—ã–µ –∫–æ–º–Ω–∞—Ç—ã (–ø–æ –ø–∞—Ä–æ–ª—é)

---

## üìù –ß–µ–∫–ª–∏—Å—Ç –ø–µ—Ä–µ–¥ –¥–µ–ø–ª–æ–µ–º

### –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö:
- [ ] –ú–∏–≥—Ä–∞—Ü–∏—è –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∞
- [ ] –ò–Ω–¥–µ–∫—Å—ã —Å–æ–∑–¥–∞–Ω—ã
- [ ] Cascade constraints —Ä–∞–±–æ—Ç–∞—é—Ç
- [ ] –ë—ç–∫–∞–ø —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–π –ë–î

### –ö–æ–¥:
- [ ] Unit —Ç–µ—Å—Ç—ã –ø—Ä–æ—Ö–æ–¥—è—Ç (>80% coverage)
- [ ] –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ —Ç–µ—Å—Ç—ã –ø—Ä–æ—Ö–æ–¥—è—Ç
- [ ] –ù–µ—Ç breaking changes –¥–ª—è —Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
- [ ] –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–æ
- [ ] Error handling –¥–ª—è –≤—Å–µ—Ö edge cases

### –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å:
- [ ] Rate limiting —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω
- [ ] –í–∞–ª–∏–¥–∞—Ü–∏—è –≤—Ö–æ–¥–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö
- [ ] SQL injection –∑–∞—â–∏—Ç–∞
- [ ] Admin override –¥–ª—è –∑–∞–∫—Ä—ã—Ç–∏—è –∫–æ–º–Ω–∞—Ç

### –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è:
- [ ] README –æ–±–Ω–æ–≤–ª—ë–Ω
- [ ] UPDATE.md —Å –æ–ø–∏—Å–∞–Ω–∏–µ–º –Ω–æ–≤–æ–π —Ñ–∏—á–∏
- [ ] –ö–æ–º–∞–Ω–¥—ã –±–æ—Ç–∞ –∑–∞–¥–æ–∫—É–º–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω—ã

---

## üéØ –ü–æ—ç—Ç–∞–ø–Ω–æ–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ

### –ü–æ—Ä—è–¥–æ–∫ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏:
1. ‚úÖ **–≠—Ç–∞–ø 1:** –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö (–ø—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞ dev –ë–î)
2. ‚úÖ **–≠—Ç–∞–ø 2:** –ú–æ–¥–µ–ª–∏ –∏ RoomManager (unit —Ç–µ—Å—Ç—ã)
3. ‚úÖ **–≠—Ç–∞–ø 3:** –ö–æ–º–∞–Ω–¥—ã —Å–æ–∑–¥–∞–Ω–∏—è/–ø—Ä–∏—Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è
4. ‚úÖ **–¢–µ—Å—Ç:** 2 –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –º–æ–≥—É—Ç —Å–æ–∑–¥–∞—Ç—å –∏ –ø—Ä–∏—Å–æ–µ–¥–∏–Ω–∏—Ç—å—Å—è
5. ‚úÖ **–≠—Ç–∞–ø 4:** –û–±—Ä–∞–±–æ—Ç–∫–∞ —Å–æ–æ–±—â–µ–Ω–∏–π –≤ –∫–æ–º–Ω–∞—Ç–µ
6. ‚úÖ **–¢–µ—Å—Ç:** –°–æ–æ–±—â–µ–Ω–∏—è –ø–µ—Ä–µ–≤–æ–¥—è—Ç—Å—è –º–µ–∂–¥—É —É—á–∞—Å—Ç–Ω–∏–∫–∞–º–∏
7. ‚úÖ **–≠—Ç–∞–ø 5:** UI/–∫–ª–∞–≤–∏–∞—Ç—É—Ä—ã
8. ‚úÖ **–≠—Ç–∞–ø 6:** –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å –æ—Å–Ω–æ–≤–Ω—ã–º –±–æ—Ç–æ–º
9. ‚úÖ **–§–∏–Ω–∞–ª—å–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ:** 3 –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –≤ –ø—Ä–æ–¥–∞–∫—à–µ–Ω–µ

---

## üêõ Rollback –ø–ª–∞–Ω

–ï—Å–ª–∏ —á—Ç–æ-—Ç–æ –ø–æ–π–¥—ë—Ç –Ω–µ —Ç–∞–∫:

```bash
# 1. –û—Ç–∫–∞—Ç–∏—Ç—å –ë–î
git checkout HEAD~1 -- data/translator_bot.db

# 2. –û—Ç–∫–∞—Ç–∏—Ç—å –∫–æ–¥
git revert <commit-hash>

# 3. –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å –±–æ—Ç–∞
sudo systemctl restart translator-bot

# 4. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ª–æ–≥–∏
tail -f bot.log
```

### –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å:
- –í—Å–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è –≤ feature branch `feature/rooms`
- –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –Ω–∞ dev –æ–∫—Ä—É–∂–µ–Ω–∏–∏
- –ü–æ—Å—Ç–µ–ø–µ–Ω–Ω—ã–π rollout (—Å–Ω–∞—á–∞–ª–∞ 1-2 —Ç–µ—Å—Ç–æ–≤—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è)

---

## üìà –ë—É–¥—É—â–∏–µ —É–ª—É—á—à–µ–Ω–∏—è

### v2.6.0+:
- [ ] WebSocket –¥–ª—è —Ä–µ–∞–ª-—Ç–∞–π–º –æ–±–Ω–æ–≤–ª–µ–Ω–∏–π
- [ ] –ü–æ–∫–∞–∑ "–ø–µ—á–∞—Ç–∞–µ—Ç..." –¥—Ä—É–≥–∏–º —É—á–∞—Å—Ç–Ω–∏–∫–∞–º
- [ ] Push —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –æ –Ω–æ–≤—ã—Ö —Å–æ–æ–±—â–µ–Ω–∏—è—Ö
- [ ] –≠–∫—Å–ø–æ—Ä—Ç –∏—Å—Ç–æ—Ä–∏–∏ –ø–µ—Ä–µ–≥–æ–≤–æ—Ä–æ–≤
- [ ] –í–∏–¥–µ–æ–∑–≤–æ–Ω–∫–∏ (–∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å–æ —Å—Ç–æ—Ä–æ–Ω–Ω–∏–º —Å–µ—Ä–≤–∏—Å–æ–º)
- [ ] AI-–º–æ–¥–µ—Ä–∞—Ü–∏—è –∫–æ–Ω—Ç–µ–Ω—Ç–∞
- [ ] –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –∫–æ–º–Ω–∞—Ç –≤ /admin

---

---

## ‚úÖ –ü–†–û–ì–†–ï–°–° –†–ï–ê–õ–ò–ó–ê–¶–ò–ò

### ‚úÖ –≠—Ç–∞–ø 1: –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö (–ó–ê–í–ï–†–®–ï–ù)
- ‚úÖ –°–æ–∑–¥–∞–Ω—ã —Ç–∞–±–ª–∏—Ü—ã: rooms, room_members, room_messages
- ‚úÖ –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ 10 –º–µ—Ç–æ–¥–æ–≤ –ë–î
- ‚úÖ Cascade deletes —Ä–∞–±–æ—Ç–∞—é—Ç
- ‚úÖ –¢–µ—Å—Ç—ã –ø—Ä–æ–π–¥–µ–Ω—ã
- **–ö–æ–º–º–∏—Ç:** 88f108b

### ‚úÖ –≠—Ç–∞–ø 2: –ú–æ–¥–µ–ª–∏ –∏ —Å–µ—Ä–≤–∏—Å—ã (–ó–ê–í–ï–†–®–ï–ù)
- ‚úÖ –ú–æ–¥–µ–ª–∏: Room, RoomMember, RoomMessage
- ‚úÖ RoomManager —Å –º–µ—Ç–æ–¥–∞–º–∏ create/join/leave/broadcast
- ‚úÖ –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å translation service
- ‚úÖ –¢–µ—Å—Ç—ã –ø—Ä–æ–π–¥–µ–Ω—ã
- **–ö–æ–º–º–∏—Ç:** 88f108b

### ‚úÖ –≠—Ç–∞–ø 3: –ö–æ–º–∞–Ω–¥—ã –∏ UI (–ó–ê–í–ï–†–®–ï–ù)
- ‚úÖ room_commands.py - –ø–æ–ª–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ –∫–æ–º–∞–Ω–¥
- ‚úÖ room_keyboards.py - –∫–ª–∞–≤–∏–∞—Ç—É—Ä—ã
- ‚úÖ –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å text.py –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ /room join
- ‚úÖ 12 —Ç–µ—Å—Ç–æ–≤—ã—Ö —Å—Ü–µ–Ω–∞—Ä–∏–µ–≤ –ø—Ä–æ–π–¥–µ–Ω—ã
- **–ö–æ–º–º–∏—Ç:** ae8bfe6

### ‚úÖ –≠—Ç–∞–ø 4: –†—É—Å–∏—Ñ–∏–∫–∞—Ü–∏—è –∏ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ (–ó–ê–í–ï–†–®–ï–ù)
- ‚úÖ –í—Å–µ —Å–æ–æ–±—â–µ–Ω–∏—è –ø–µ—Ä–µ–≤–µ–¥–µ–Ω—ã –Ω–∞ —Ä—É—Å—Å–∫–∏–π
- ‚úÖ –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ —Ç–µ—Å—Ç—ã (EN ‚Üî RU ‚Üî TH)
- ‚úÖ test_room_integration.py —Ä–∞–±–æ—Ç–∞–µ—Ç
- ‚úÖ –ë–æ—Ç –ø–µ—Ä–µ–∑–∞–ø—É—â–µ–Ω —Å –Ω–æ–≤—ã–º —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª–æ–º
- ‚úÖ –°–æ–∑–¥–∞–Ω–∞ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è TESTING_ROOMS.md
- **–ö–æ–º–º–∏—Ç—ã:** 1c166aa, 9a368f9

### üîÑ –≠—Ç–∞–ø 5: –†–µ–∞–ª—å–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ (–í –ü–†–û–¶–ï–°–°–ï)
- ‚è≥ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Å —Ä–µ–∞–ª—å–Ω—ã–º–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏ –≤ Telegram
- ‚è≥ –ü—Ä–æ–≤–µ—Ä–∫–∞ –≤—Å–µ—Ö —Å—Ü–µ–Ω–∞—Ä–∏–µ–≤ –∏–∑ TESTING_ROOMS.md
- ‚è≥ –°–±–æ—Ä —Ñ–∏–¥–±–µ–∫–∞

### ‚è≥ –≠—Ç–∞–ø 6: –î–æ—Ä–∞–±–æ—Ç–∫–∞ –∏ –ø–æ–ª–∏—Ä–æ–≤–∫–∞
- ‚è≥ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –±–∞–≥–æ–≤
- ‚è≥ –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏
- ‚è≥ –§–∏–Ω–∞–ª—å–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

---

**–í–µ—Ä—Å–∏—è –¥–æ–∫—É–º–µ–Ω—Ç–∞:** 2.0
**–î–∞—Ç–∞ —Å–æ–∑–¥–∞–Ω–∏—è:** 2025-10-07
**–ü–æ—Å–ª–µ–¥–Ω–µ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ:** 2025-10-07 16:20
**–ê–≤—Ç–æ—Ä:** Claude Code
**–°—Ç–∞—Ç—É—Å:** üöÄ –≠—Ç–∞–ø 4 –∑–∞–≤–µ—Ä—à–µ–Ω, –≥–æ—Ç–æ–≤ –∫ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—é!
